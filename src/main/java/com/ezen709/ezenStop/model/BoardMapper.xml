<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezen709.ezenStop.model">
 	<select id="reviewList" parameterType="java.util.Map" resultType="ReviewBoardDTO">
		select * 
		from (
			select rownum rn, A.* 
		 	from (
		 		select * 
		 		from ezen_review_board 
				where visible = 1
		 		order by article_num desc)A
		 	) 
		where rn between #{start} and #{end}
 	</select>
	<select id="reviewGetCount" resultType="Integer">
		select count(*)
		from ezen_review_board
		where visible = 1
	</select>
	<update id="plusReadCount" parameterType="Integer">
 		update ezen_review_board 
 		set readcount = readcount + 1 
 		where article_num = #{article_num}
 	</update>
 	<update id="updateReplyCount" parameterType="java.util.Map">
 		update ezen_review_board 
 		set replycount = #{replyCount} 
 		where article_num = #{article_num}
 	</update>
	<insert id="reviewInsert" parameterType="ReviewBoardDTO">
 		insert into ezen_review_board 
 		values (ezen_board_seq.nextval, #{category}, #{subject}, #{id}, #{content}, 
 		to_char(sysdate,'yyyy-mm-dd'), to_char(sysdate,'hh24:mi'), 0, 0, 0, 0, 0, 1, #{image}, #{filesize})
 	</insert>
 	<select id="reviewDetail" parameterType="Integer" resultType="ReviewBoardDTO">
 		select * 
 		from ezen_review_board
 		where article_num = #{article_num}
 	</select>
</mapper>